/*!
  
  jquery.nZoom.js
  
  Version: 0.1.0
  Author: Nunifuchisaka(nunifuchisaka@gmail.com)
  Website: http://nunifuchisaka.com/w/n-zoom/demo
  Repository: https://github.com/Nunifuchisaka/nZoom
  
*/
!function(t,e,i,s){"use strict";function o(e,i){_.bindAll(this,"setLargeImg","resetLargeImgCoordinate","enable","disable","grabStart","grabMove","grabEnd"),this.opts=t.extend({duration:500},i),this.$el=t(e),this.$img=this.$el.find(".nZoom__img"),this.$img_s=this.$img.children("img"),this.$enable=this.$el.find(".nZoom__enable"),this.el_width=this.$el.width(),this.el_width_half=Math.round(this.el_width/2),this.el_height=this.$el.height(),this.el_height_half=Math.round(this.el_height/2),this.status={enabled:!1,grabbing:!1},this.coordinate={x:0,y:0,top:0,left:0},this.setLargeImg(),this.$enable.click(this.enable),this.$el.on({"mousedown.nzoom":this.grabStart,"mousemove.nzoom":this.grabMove,"mouseup.nzoom":this.grabEnd,"mouseleave.nzoom":this.disable})}t.fn.nZoom=function(){var t,e,i=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),h=i.length;for(t=0;t<h;t++)if("object"==typeof s||void 0===s)i[t].nZoom=new o(i[t],s);else if(void 0!==(e=i[t].nZoom[s].apply(i[t].nZoom,n)))return e;return i},o.prototype.setLargeImg=function(){this.$lImg=this.$img_s.clone(),this.$lImg.removeAttr("width height").addClass("nZoom__lImg").fadeOut(0),this.$img.append(this.$lImg),this.resetLargeImgCoordinate()},o.prototype.resetLargeImgCoordinate=function(){this.lImg_width=this.$lImg.width(),this.lImg_height=this.$lImg.height(),this.$lImg.css({top:this.el_height_half-Math.round(this.lImg_height/2),left:this.el_width_half-Math.round(this.lImg_width/2)})},o.prototype.grabStart=function(t){this.status.enabled&&(this.status.grabbing=!0,this.coordinate={x:t.clientX,y:t.clientY,top:parseInt(this.$lImg.css("top")),left:parseInt(this.$lImg.css("left"))})},o.prototype.grabMove=function(t){if(this.status.grabbing){var e=this.coordinate.left+-1*(this.coordinate.x-t.clientX),i=this.coordinate.top+-1*(this.coordinate.y-t.clientY),s=-1*(this.lImg_width-this.el_width),o=-1*(this.lImg_height-this.el_height);e<s&&(e=s),i<o&&(i=o),e>0&&(e=0),i>0&&(i=0),this.$lImg.css({top:i,left:e})}},o.prototype.grabEnd=function(t){this.status.grabbing&&(this.status.grabbing=!1)},o.prototype.enable=function(){return this.status.enabled=!0,this.resetLargeImgCoordinate(),this.$el.addClass("is_enabled"),this.$lImg.fadeIn(this.opts.duration),this.$enable.fadeOut(this.opts.duration),this.$el.trigger(new t.Event("enable")),!1},o.prototype.disable=function(){return this.status.enabled=!1,this.grabEnd(),this.$el.removeClass("is_enabled"),this.$lImg.fadeOut(this.opts.duration),this.$enable.fadeIn(this.opts.duration),this.$el.trigger(new t.Event("disable")),!1},e.nZoomCarousel=function(e){_.bindAll(this,"setCurrentSlide","enable","disable"),this.opts=t.extend({duration:500},e),this.$el=t(this.opts.el),this.$enable=this.$el.find(".nZoom__enable"),this.currentSlide=0,this.$zoom=this.$el.find(".nZoom"),this.$zoom.nZoom().on("disable",this.disable),this.$enable.click(this.enable)},nZoomCarousel.prototype.setCurrentSlide=function(t){this.currentSlide=t},nZoomCarousel.prototype.enable=function(){return this.$zoom.eq(this.currentSlide).nZoom("enable"),this.$enable.fadeOut(this.opts.duration),!1},nZoomCarousel.prototype.disable=function(){this.$enable.fadeIn(this.opts.duration)}}(jQuery,this,this.document);