/*!
  
  jquery.nZoom.js
  
  Version: 0.1.0
  Author: Nunifuchisaka(nunifuchisaka@gmail.com)
  Website: http://nunifuchisaka.com/w/n-zoom/demo
  Repository: https://github.com/Nunifuchisaka/nZoom
  
*/
!function(n,h,t,e){"use strict";function a(t,e){var i=this;_.bindAll(this,"resize","setLargeImg","resetLargeImgCoordinate","enable","disable","grabStart","grabMove","grabEnd"),this.opts=n.extend({duration:500,disableEvent:"mouseleave"},e),this.$window=n(h),this.$el=n(t),this.$img=this.$el.find(".nZoom__img"),this.$img_s=this.$img.children("img"),this.$enable=this.$el.find(".nZoom__enable"),this.status={enabled:!1,grabbing:!1},this.coordinate={x:0,y:0,top:0,left:0},this.resize();var s=0;this.$window.on("resize",function(){0<s&&clearTimeout(s),s=setTimeout(i.resize,200)}),this.setLargeImg(),this.$enable.click(this.enable);var o={"mousedown.nzoom":this.grabStart,"mousemove.nzoom":this.grabMove,"mouseup.nzoom":this.grabEnd};o[this.opts.disableEvent+".nzoom"]=this.disable,this.$el.on(o)}n.fn.nZoom=function(){var t,e,i=this,s=arguments[0],o=Array.prototype.slice.call(arguments,1),n=i.length;for(t=0;t<n;t++)if("object"==typeof s||void 0===s)i[t].nZoom=new a(i[t],s);else if(void 0!==(e=i[t].nZoom[s].apply(i[t].nZoom,o)))return e;return i},a.prototype.resize=function(){console.log("resize"),this.el_width=this.$el.width(),this.el_width_half=Math.round(this.el_width/2),this.el_height=this.$el.height(),this.el_height_half=Math.round(this.el_height/2)},a.prototype.setLargeImg=function(){this.$lImg=n('<div class="nZoom__lImg" />'),this.$lImg.append(this.$img_s.clone().removeAttr("width height")).fadeOut(0),this.$img.append(this.$lImg),this.resetLargeImgCoordinate()},a.prototype.resetLargeImgCoordinate=function(){this.lImg_width=this.$lImg.width(),this.lImg_height=this.$lImg.height(),this.$lImg.css({top:this.el_height_half-Math.round(this.lImg_height/2),left:this.el_width_half-Math.round(this.lImg_width/2)})},a.prototype.grabStart=function(t){this.status.enabled&&(this.status.grabbing=!0,this.coordinate={x:t.clientX,y:t.clientY,top:parseInt(this.$lImg.css("top")),left:parseInt(this.$lImg.css("left"))})},a.prototype.grabMove=function(t){if(this.status.grabbing){var e=this.coordinate.left+-1*(this.coordinate.x-t.clientX),i=this.coordinate.top+-1*(this.coordinate.y-t.clientY),s=-1*(this.lImg_width-this.el_width),o=-1*(this.lImg_height-this.el_height);e<s&&(e=s),i<o&&(i=o),0<e&&(e=0),0<i&&(i=0),this.$lImg.css({top:i,left:e})}},a.prototype.grabEnd=function(t){this.status.grabbing&&(this.status.grabbing=!1)},a.prototype.enable=function(){return this.status.enabled=!0,this.resetLargeImgCoordinate(),this.$el.addClass("is_enabled"),this.$lImg.fadeIn(this.opts.duration),this.$enable.fadeOut(this.opts.duration),this.$el.trigger(new n.Event("enable")),!1},a.prototype.disable=function(){return this.status.enabled=!1,this.grabEnd(),this.$el.removeClass("is_enabled"),this.$lImg.fadeOut(this.opts.duration),this.$enable.fadeIn(this.opts.duration),this.$el.trigger(new n.Event("disable")),!1},h.nZoomCarousel=function(t){_.bindAll(this,"setCurrentSlide","enable","disable"),this.opts=n.extend({duration:500},t),this.$el=n(this.opts.el),this.$enable=this.$el.find(".nZoom__enable"),this.currentSlide=0,this.$zoom=this.$el.find(".nZoom"),this.$zoom.nZoom().on("disable",this.disable),this.$enable.click(this.enable)},nZoomCarousel.prototype.setCurrentSlide=function(t){this.currentSlide=t},nZoomCarousel.prototype.enable=function(){return this.$zoom.eq(this.currentSlide).nZoom("enable"),this.$enable.fadeOut(this.opts.duration),!1},nZoomCarousel.prototype.disable=function(){this.$enable.fadeIn(this.opts.duration)}}(jQuery,this,this.document);