/*!
  
  jquery.nZoom.js
  
  Version: 0.1.0
  Author: Nunifuchisaka(nunifuchisaka@gmail.com)
  Website: http://nunifuchisaka.com/w/n-zoom/demo
  Repository: https://github.com/Nunifuchisaka/nZoom
  
*/
!function(t,i,e,s){"use strict";function h(i){_.bindAll(this,"setLargeImg","resetLargeImgCoordinate","enable","disable","grabStart","grabMove","grabEnd"),this.opts=t.extend({duration:500},i),this.$el=t(this.opts.el),this.$img=this.$el.find(".nZoom__img"),this.$img_s=this.$img.children("img"),this.$enable=this.$el.find(".nZoom__enable"),this.el_width=this.$el.width(),this.el_width_half=Math.round(this.el_width/2),this.el_height=this.$el.height(),this.el_height_half=Math.round(this.el_height/2),this.status={enabled:!1,grabbing:!1},this.coordinate={x:0,y:0,top:0,left:0},this.setLargeImg(),this.$enable.click(this.enable),this.$el.on({"mousedown.nzoom":this.grabStart,"mousemove.nzoom":this.grabMove,"mouseup.nzoom":this.grabEnd,"mouseleave.nzoom":this.disable})}t.fn.nZoom=function(i){return this.each(function(e,s){new h(t.extend({i:e,el:s},i))})},h.prototype.setLargeImg=function(){this.$lImg=this.$img_s.clone(),this.$lImg.removeAttr("width height").addClass("nZoom__lImg").fadeOut(0),this.$img.append(this.$lImg),this.resetLargeImgCoordinate()},h.prototype.resetLargeImgCoordinate=function(){this.lImg_width=this.$lImg.width(),this.lImg_height=this.$lImg.height(),this.$lImg.css({top:this.el_height_half-Math.round(this.lImg_height/2),left:this.el_width_half-Math.round(this.lImg_width/2)})},h.prototype.grabStart=function(t){this.status.enabled&&(this.status.grabbing=!0,this.coordinate={x:t.clientX,y:t.clientY,top:parseInt(this.$lImg.css("top")),left:parseInt(this.$lImg.css("left"))})},h.prototype.grabMove=function(t){if(this.status.grabbing){var i=this.coordinate.left+-1*(this.coordinate.x-t.clientX),e=this.coordinate.top+-1*(this.coordinate.y-t.clientY),s=-1*(this.lImg_width-this.el_width),h=-1*(this.lImg_height-this.el_height);i<s&&(i=s),e<h&&(e=h),i>0&&(i=0),e>0&&(e=0),this.$lImg.css({top:e,left:i})}},h.prototype.grabEnd=function(t){this.status.grabbing&&(this.status.grabbing=!1)},h.prototype.enable=function(){return this.status.enabled=!0,this.resetLargeImgCoordinate(),this.$el.addClass("is_enabled"),this.$lImg.fadeIn(this.opts.duration),this.$enable.fadeOut(this.opts.duration),!1},h.prototype.disable=function(){return this.status.enabled=!1,this.grabEnd(),this.$el.removeClass("is_enabled"),this.$lImg.fadeOut(this.opts.duration),this.$enable.fadeIn(this.opts.duration),!1}}(jQuery,0,this.document);