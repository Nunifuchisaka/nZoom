/*!
  
  jquery.nZoom.js
  
  Version: 0.1.0
  Author: Nunifuchisaka(nunifuchisaka@gmail.com)
  Website: http://nunifuchisaka.com/w/n-zoom/demo
  Repository: https://github.com/Nunifuchisaka/nZoom
  
*/
!function(t,e,i,s){"use strict";function o(e,i){_.bindAll(this,"setLargeImg","resetLargeImgCoordinate","enable","disable","grabStart","grabMove","grabEnd"),this.opts=t.extend({duration:500},i),this.$el=t(e),this.$img=this.$el.find(".nZoom__img"),this.$img_s=this.$img.children("img"),this.$enable=this.$el.find(".nZoom__enable"),this.el_width=this.$el.width(),this.el_width_half=Math.round(this.el_width/2),this.el_height=this.$el.height(),this.el_height_half=Math.round(this.el_height/2),this.status={enabled:!1,grabbing:!1},this.coordinate={x:0,y:0,top:0,left:0},this.setLargeImg(),this.$enable.click(this.enable),this.$el.on({"mousedown.nzoom":this.grabStart,"mousemove.nzoom":this.grabMove,"mouseup.nzoom":this.grabEnd,"mouseleave.nzoom":this.disable})}t.fn.nZoom=function(){var t,e,i=this,s=arguments[0],h=Array.prototype.slice.call(arguments,1),n=i.length;for(t=0;t<n;t++)if("object"==typeof s||void 0===s)i[t].nZoom=new o(i[t],s);else if(void 0!==(e=i[t].nZoom[s].apply(i[t].nZoom,h)))return e;return i},o.prototype.setLargeImg=function(){this.$lImg=this.$img_s.clone(),this.$lImg.removeAttr("width height").addClass("nZoom__lImg").fadeOut(0),this.$img.append(this.$lImg),this.resetLargeImgCoordinate()},o.prototype.resetLargeImgCoordinate=function(){this.lImg_width=this.$lImg.width(),this.lImg_height=this.$lImg.height(),this.$lImg.css({top:this.el_height_half-Math.round(this.lImg_height/2),left:this.el_width_half-Math.round(this.lImg_width/2)})},o.prototype.grabStart=function(t){this.status.enabled&&(this.status.grabbing=!0,this.coordinate={x:t.clientX,y:t.clientY,top:parseInt(this.$lImg.css("top")),left:parseInt(this.$lImg.css("left"))})},o.prototype.grabMove=function(t){if(this.status.grabbing){var e=this.coordinate.left+-1*(this.coordinate.x-t.clientX),i=this.coordinate.top+-1*(this.coordinate.y-t.clientY),s=-1*(this.lImg_width-this.el_width),o=-1*(this.lImg_height-this.el_height);e<s&&(e=s),i<o&&(i=o),e>0&&(e=0),i>0&&(i=0),this.$lImg.css({top:i,left:e})}},o.prototype.grabEnd=function(t){this.status.grabbing&&(this.status.grabbing=!1)},o.prototype.enable=function(){return this.status.enabled=!0,this.resetLargeImgCoordinate(),this.$el.addClass("is_enabled"),this.$lImg.fadeIn(this.opts.duration),this.$enable.fadeOut(this.opts.duration),!1},o.prototype.disable=function(){return this.status.enabled=!1,this.grabEnd(),this.$el.removeClass("is_enabled"),this.$lImg.fadeOut(this.opts.duration),this.$enable.fadeIn(this.opts.duration),!1},e.nZoomCarousel=function(e){_.bindAll(this,"setCurrentSlide","enable"),this.opts=t.extend({},e),this.$el=t(this.opts.el),this.$enable=this.$el.find(".nZoom__enable"),this.currentSlide=0,this.$zoom=this.$el.find(".nZoom"),this.$zoom.nZoom(),this.$enable.click(this.enable)},nZoomCarousel.prototype.setCurrentSlide=function(t){this.currentSlide=t},nZoomCarousel.prototype.enable=function(){return this.$zoom.eq(this.currentSlide).nZoom("enable"),!1}}(jQuery,this,this.document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjExMF9oZWFkZXIuanMiLCI0MTBfblpvb20uanMiLCI0MTBfQ2Fyb3VzZWwuanMiLCI5OTBfZm9vdGVyLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsInVuZGVmaW5lZCIsIm5ab29tIiwiZWwiLCJvcHRzIiwiXyIsImJpbmRBbGwiLCJ0aGlzIiwiZXh0ZW5kIiwiZHVyYXRpb24iLCIkZWwiLCIkaW1nIiwiZmluZCIsIiRpbWdfcyIsImNoaWxkcmVuIiwiJGVuYWJsZSIsImVsX3dpZHRoIiwid2lkdGgiLCJlbF93aWR0aF9oYWxmIiwiTWF0aCIsInJvdW5kIiwiZWxfaGVpZ2h0IiwiaGVpZ2h0IiwiZWxfaGVpZ2h0X2hhbGYiLCJzdGF0dXMiLCJlbmFibGVkIiwiZ3JhYmJpbmciLCJjb29yZGluYXRlIiwieCIsInkiLCJ0b3AiLCJsZWZ0Iiwic2V0TGFyZ2VJbWciLCJjbGljayIsImVuYWJsZSIsIm9uIiwibW91c2Vkb3duLm56b29tIiwiZ3JhYlN0YXJ0IiwibW91c2Vtb3ZlLm56b29tIiwiZ3JhYk1vdmUiLCJtb3VzZXVwLm56b29tIiwiZ3JhYkVuZCIsIm1vdXNlbGVhdmUubnpvb20iLCJkaXNhYmxlIiwiZm4iLCJpIiwicmV0Iiwic2VsZiIsIm9wdCIsImFyZ3VtZW50cyIsImFyZ3MiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImwiLCJsZW5ndGgiLCJhcHBseSIsIiRsSW1nIiwiY2xvbmUiLCJyZW1vdmVBdHRyIiwiYWRkQ2xhc3MiLCJmYWRlT3V0IiwiYXBwZW5kIiwicmVzZXRMYXJnZUltZ0Nvb3JkaW5hdGUiLCJsSW1nX3dpZHRoIiwibEltZ19oZWlnaHQiLCJjc3MiLCJlIiwiY2xpZW50WCIsImNsaWVudFkiLCJwYXJzZUludCIsIm1pbl94IiwibWluX3kiLCJmYWRlSW4iLCJyZW1vdmVDbGFzcyIsIm5ab29tQ2Fyb3VzZWwiLCJjdXJyZW50U2xpZGUiLCIkem9vbSIsInNldEN1cnJlbnRTbGlkZSIs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QUF1RSxNQUFBNUUsUUFFQUssS0FBQVEsUUFBQWtCLE1BQUExQixLQUFBMkIsU0FRQTBDLGNBQUF4QixVQUFBMkIsZ0JBQUEsU0FBQUYsR0FDQXRFLEtBQUFzRSxhQUFBQSxHQVFBRCxjQUFBeEIsVUFBQWxCLE9BQUEsV0FFQSxPQURBM0IsS0FBQXVFLE1BQUFFLEdBQUF6RSxLQUFBc0UsY0FBQTNFLE1BQUEsV0FDQSxJQ3JDQStFLE9BQUExRSxLQUFBQSxLQUFBUCIsImZpbGUiOiJqcXVlcnkublpvb20ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gIFxuICBqcXVlcnkublpvb20uanNcbiAgXG4gIFZlcnNpb246IDAuMS4wXG4gIEF1dGhvcjogTnVuaWZ1Y2hpc2FrYShudW5pZnVjaGlzYWthQGdtYWlsLmNvbSlcbiAgV2Vic2l0ZTogaHR0cDovL251bmlmdWNoaXNha2EuY29tL3cvbi16b29tL2RlbW9cbiAgUmVwb3NpdG9yeTogaHR0cHM6Ly9naXRodWIuY29tL051bmlmdWNoaXNha2Evblpvb21cbiAgXG4qL1xuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpe1xuJ3VzZSBzdHJpY3QnO1xuIiwiJC5mbi5uWm9vbSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIG9wdCA9IGFyZ3VtZW50c1swXSxcbiAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgbCA9IHNlbGYubGVuZ3RoLFxuICAgICAgaSxcbiAgICAgIHJldDtcbiAgXG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAodHlwZW9mIG9wdCA9PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb3B0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzZWxmW2ldLm5ab29tID0gbmV3IG5ab29tKHNlbGZbaV0sIG9wdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldCA9IHNlbGZbaV0ublpvb21bb3B0XS5hcHBseShzZWxmW2ldLm5ab29tLCBhcmdzKTtcbiAgICAgIGlmICh0eXBlb2YgcmV0ICE9ICd1bmRlZmluZWQnKSByZXR1cm4gcmV0O1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHNlbGY7XG59XG5cblxuXG4vKlxuIyMgblpvb21cbiovXG5cbmZ1bmN0aW9uIG5ab29tKCBlbCwgb3B0cyApe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIF8uYmluZEFsbCh0aGlzLCBcInNldExhcmdlSW1nXCIsIFwicmVzZXRMYXJnZUltZ0Nvb3JkaW5hdGVcIiwgXCJlbmFibGVcIiwgXCJkaXNhYmxlXCIsIFwiZ3JhYlN0YXJ0XCIsIFwiZ3JhYk1vdmVcIiwgXCJncmFiRW5kXCIpO1xuICB0aGlzLm9wdHMgPSAkLmV4dGVuZCh7XG4gICAgZHVyYXRpb246IDUwMFxuICB9LCBvcHRzKTtcbiAgXG4gIHRoaXMuJGVsID0gJChlbCk7XG4gIHRoaXMuJGltZyA9IHRoaXMuJGVsLmZpbmQoXCIublpvb21fX2ltZ1wiKTtcbiAgdGhpcy4kaW1nX3MgPSB0aGlzLiRpbWcuY2hpbGRyZW4oXCJpbWdcIik7XG4gIHRoaXMuJGVuYWJsZSA9IHRoaXMuJGVsLmZpbmQoXCIublpvb21fX2VuYWJsZVwiKTtcbiAgXG4gIHRoaXMuZWxfd2lkdGggPSB0aGlzLiRlbC53aWR0aCgpO1xuICB0aGlzLmVsX3dpZHRoX2hhbGYgPSBNYXRoLnJvdW5kKHRoaXMuZWxfd2lkdGgvMik7XG4gIHRoaXMuZWxfaGVpZ2h0ID0gdGhpcy4kZWwuaGVpZ2h0KCk7XG4gIHRoaXMuZWxfaGVpZ2h0X2hhbGYgPSBNYXRoLnJvdW5kKHRoaXMuZWxfaGVpZ2h0LzIpO1xuICBcbiAgdGhpcy5zdGF0dXMgPSB7XG4gICAgZW5hYmxlZDogZmFsc2UsXG4gICAgZ3JhYmJpbmc6IGZhbHNlXG4gIH07XG4gIFxuICB0aGlzLmNvb3JkaW5hdGUgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwXG4gIH07XG4gIFxuICB0aGlzLnNldExhcmdlSW1nKCk7XG4gIFxuICB0aGlzLiRlbmFibGUuY2xpY2sodGhpcy5lbmFibGUpO1xuICB0aGlzLiRlbFxuICAgIC5vbih7XG4gICAgICAvL1wiY2xpY2subnpvb21cIjogdGhpcy5kaXNhYmxlLFxuICAgICAgXCJtb3VzZWRvd24ubnpvb21cIjogdGhpcy5ncmFiU3RhcnQsXG4gICAgICBcIm1vdXNlbW92ZS5uem9vbVwiOiB0aGlzLmdyYWJNb3ZlLFxuICAgICAgXCJtb3VzZXVwLm56b29tXCI6IHRoaXMuZ3JhYkVuZCxcbiAgICAgIFwibW91c2VsZWF2ZS5uem9vbVwiOiB0aGlzLmRpc2FibGVcbiAgICB9KTtcbn1cblxuXG5cbi8qXG4jIyBzZXRMYXJnZUltZ1xuKi9cblxublpvb20ucHJvdG90eXBlLnNldExhcmdlSW1nID0gZnVuY3Rpb24oKXtcbiAgdGhpcy4kbEltZyA9IHRoaXMuJGltZ19zLmNsb25lKCk7XG4gIHRoaXMuJGxJbWdcbiAgICAucmVtb3ZlQXR0cihcIndpZHRoIGhlaWdodFwiKVxuICAgIC5hZGRDbGFzcyhcIm5ab29tX19sSW1nXCIpXG4gICAgLmZhZGVPdXQoMCk7XG4gIFxuICB0aGlzLiRpbWcuYXBwZW5kKHRoaXMuJGxJbWcpO1xuICBcbiAgdGhpcy5yZXNldExhcmdlSW1nQ29vcmRpbmF0ZSgpO1xufVxuXG5cbm5ab29tLnByb3RvdHlwZS5yZXNldExhcmdlSW1nQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubEltZ193aWR0aCA9IHRoaXMuJGxJbWcud2lkdGgoKTtcbiAgdGhpcy5sSW1nX2hlaWdodCA9IHRoaXMuJGxJbWcuaGVpZ2h0KCk7XG4gIHRoaXMuJGxJbWcuY3NzKHtcbiAgICB0b3A6IHRoaXMuZWxfaGVpZ2h0X2hhbGYgLSBNYXRoLnJvdW5kKHRoaXMubEltZ19oZWlnaHQvMiksXG4gICAgbGVmdDogdGhpcy5lbF93aWR0aF9oYWxmIC0gTWF0aC5yb3VuZCh0aGlzLmxJbWdfd2lkdGgvMilcbiAgfSk7XG59XG5cblxuXG4vKlxuIyMgZHJhZ1xuKi9cblxublpvb20ucHJvdG90eXBlLmdyYWJTdGFydCA9IGZ1bmN0aW9uKGUpe1xuICBpZih0aGlzLnN0YXR1cy5lbmFibGVkKXtcbiAgICB0aGlzLnN0YXR1cy5ncmFiYmluZyA9IHRydWU7XG4gICAgdGhpcy5jb29yZGluYXRlID0ge1xuICAgICAgeDogZS5jbGllbnRYLFxuICAgICAgeTogZS5jbGllbnRZLFxuICAgICAgdG9wOiBwYXJzZUludCh0aGlzLiRsSW1nLmNzcyhcInRvcFwiKSksXG4gICAgICBsZWZ0OiBwYXJzZUludCh0aGlzLiRsSW1nLmNzcyhcImxlZnRcIikpXG4gICAgfVxuICB9XG59XG5cblxublpvb20ucHJvdG90eXBlLmdyYWJNb3ZlID0gZnVuY3Rpb24oZSl7XG4gIGlmKHRoaXMuc3RhdHVzLmdyYWJiaW5nKXtcbiAgICB2YXIgeCA9IHRoaXMuY29vcmRpbmF0ZS5sZWZ0ICsgKC0xICogKHRoaXMuY29vcmRpbmF0ZS54IC0gZS5jbGllbnRYKSk7XG4gICAgdmFyIHkgPSB0aGlzLmNvb3JkaW5hdGUudG9wICsgKC0xICogKHRoaXMuY29vcmRpbmF0ZS55IC0gZS5jbGllbnRZKSk7XG4gICAgXG4gICAgdmFyIG1pbl94ID0gLTEgKiAodGhpcy5sSW1nX3dpZHRoIC0gdGhpcy5lbF93aWR0aCksXG4gICAgICAgIG1pbl95ID0gLTEgKiAodGhpcy5sSW1nX2hlaWdodCAtIHRoaXMuZWxfaGVpZ2h0KTtcbiAgICBcbiAgICBpZiggeCA8IG1pbl94ICkgeCA9IG1pbl94O1xuICAgIGlmKCB5IDwgbWluX3kgKSB5ID0gbWluX3k7XG4gICAgXG4gICAgaWYoIHggPiAwICkgeCA9IDA7XG4gICAgaWYoIHkgPiAwICkgeSA9IDA7XG4gICAgXG4gICAgdGhpcy4kbEltZy5jc3Moe1xuICAgICAgdG9wOiB5LFxuICAgICAgbGVmdDogeFxuICAgIH0pO1xuICB9XG59XG5cblxublpvb20ucHJvdG90eXBlLmdyYWJFbmQgPSBmdW5jdGlvbihlKXtcbiAgaWYodGhpcy5zdGF0dXMuZ3JhYmJpbmcpe1xuICAgIHRoaXMuc3RhdHVzLmdyYWJiaW5nID0gZmFsc2U7XG4gIH1cbn1cblxuXG5cbi8qXG4jIyBlbmFibGVcbiovXG5cbm5ab29tLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLnN0YXR1cy5lbmFibGVkID0gdHJ1ZTtcbiAgdGhpcy5yZXNldExhcmdlSW1nQ29vcmRpbmF0ZSgpO1xuICB0aGlzLiRlbC5hZGRDbGFzcyhcImlzX2VuYWJsZWRcIik7XG4gIHRoaXMuJGxJbWcuZmFkZUluKHRoaXMub3B0cy5kdXJhdGlvbik7XG4gIHRoaXMuJGVuYWJsZS5mYWRlT3V0KHRoaXMub3B0cy5kdXJhdGlvbik7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG5cbi8qXG4jIyBkaXNhYmxlXG4qL1xuXG5uWm9vbS5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuc3RhdHVzLmVuYWJsZWQgPSBmYWxzZTtcbiAgdGhpcy5ncmFiRW5kKCk7XG4gIHRoaXMuJGVsLnJlbW92ZUNsYXNzKFwiaXNfZW5hYmxlZFwiKTtcbiAgdGhpcy4kbEltZy5mYWRlT3V0KHRoaXMub3B0cy5kdXJhdGlvbik7XG4gIHRoaXMuJGVuYWJsZS5mYWRlSW4odGhpcy5vcHRzLmR1cmF0aW9uKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLypcbiMjIG5ab29tQ2Fyb3VzZWxcbiovXG5cbndpbmRvdy5uWm9vbUNhcm91c2VsID0gZnVuY3Rpb24gKCBvcHRzICl7XG4gIF8uYmluZEFsbCh0aGlzLCBcInNldEN1cnJlbnRTbGlkZVwiLCBcImVuYWJsZVwiKTtcbiAgdGhpcy5vcHRzID0gJC5leHRlbmQoe1xuICAgIFxuICB9LCBvcHRzKTtcbiAgXG4gIHRoaXMuJGVsID0gJCh0aGlzLm9wdHMuZWwpO1xuICB0aGlzLiRlbmFibGUgPSB0aGlzLiRlbC5maW5kKFwiLm5ab29tX19lbmFibGVcIik7XG4gIFxuICB0aGlzLmN1cnJlbnRTbGlkZSA9IDA7XG4gIFxuICB0aGlzLiR6b29tID0gdGhpcy4kZWwuZmluZChcIi5uWm9vbVwiKTtcbiAgdGhpcy4kem9vbS5uWm9vbSgpO1xuICBcbiAgdGhpcy4kZW5hYmxlLmNsaWNrKHRoaXMuZW5hYmxlKTtcbn1cblxuXG4vKlxuIyMgc2V0Q3VycmVudFNsaWRlXG4qL1xuXG5uWm9vbUNhcm91c2VsLnByb3RvdHlwZS5zZXRDdXJyZW50U2xpZGUgPSBmdW5jdGlvbihjdXJyZW50U2xpZGUpe1xuICB0aGlzLmN1cnJlbnRTbGlkZSA9IGN1cnJlbnRTbGlkZTtcbn1cblxuXG4vKlxuIyMgZW5hYmxlXG4qL1xuXG5uWm9vbUNhcm91c2VsLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLiR6b29tLmVxKCB0aGlzLmN1cnJlbnRTbGlkZSApLm5ab29tKFwiZW5hYmxlXCIpO1xuICByZXR1cm4gZmFsc2U7XG59XG4iLCJ9KShqUXVlcnksIHRoaXMsIHRoaXMuZG9jdW1lbnQpOyJdfQ==
