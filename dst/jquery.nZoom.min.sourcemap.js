/*!
  
  jquery.nZoom.js
  
  Version: 0.1.0
  Author: Nunifuchisaka(nunifuchisaka@gmail.com)
  Website: http://nunifuchisaka.com/w/n-zoom/demo
  Repository: https://github.com/Nunifuchisaka/nZoom
  
*/
!function(n,h,t,e){"use strict";function a(t,e){var i=this;_.bindAll(this,"resize","setLargeImg","resetLargeImgCoordinate","enable","disable","grabStart","grabMove","grabEnd"),this.opts=n.extend({duration:500,disableEvent:"mouseleave"},e),this.$window=n(h),this.$el=n(t),this.$img=this.$el.find(".nZoom__img"),this.$img_s=this.$img.children("img"),this.$enable=this.$el.find(".nZoom__enable"),this.status={enabled:!1,grabbing:!1},this.coordinate={x:0,y:0,top:0,left:0},this.resize();var s=0;this.$window.on("resize",function(){0<s&&clearTimeout(s),s=setTimeout(i.resize,200)}),this.setLargeImg(),this.$enable.click(this.enable);var o={"mousedown.nzoom":this.grabStart,"mousemove.nzoom":this.grabMove,"mouseup.nzoom":this.grabEnd};o[this.opts.disableEvent+".nzoom"]=this.disable,this.$el.on(o)}n.fn.nZoom=function(){var t,e,i=this,s=arguments[0],o=Array.prototype.slice.call(arguments,1),n=i.length;for(t=0;t<n;t++)if("object"==typeof s||void 0===s)i[t].nZoom=new a(i[t],s);else if(void 0!==(e=i[t].nZoom[s].apply(i[t].nZoom,o)))return e;return i},a.prototype.resize=function(){console.log("resize"),this.el_width=this.$el.width(),this.el_width_half=Math.round(this.el_width/2),this.el_height=this.$el.height(),this.el_height_half=Math.round(this.el_height/2)},a.prototype.setLargeImg=function(){this.$lImg=n('<div class="nZoom__lImg" />'),this.$lImg.append(this.$img_s.clone().removeAttr("width height")).fadeOut(0),this.$img.append(this.$lImg),this.resetLargeImgCoordinate()},a.prototype.resetLargeImgCoordinate=function(){this.lImg_width=this.$lImg.width(),this.lImg_height=this.$lImg.height(),this.$lImg.css({top:this.el_height_half-Math.round(this.lImg_height/2),left:this.el_width_half-Math.round(this.lImg_width/2)})},a.prototype.grabStart=function(t){this.status.enabled&&(this.status.grabbing=!0,this.coordinate={x:t.clientX,y:t.clientY,top:parseInt(this.$lImg.css("top")),left:parseInt(this.$lImg.css("left"))})},a.prototype.grabMove=function(t){if(this.status.grabbing){var e=this.coordinate.left+-1*(this.coordinate.x-t.clientX),i=this.coordinate.top+-1*(this.coordinate.y-t.clientY),s=-1*(this.lImg_width-this.el_width),o=-1*(this.lImg_height-this.el_height);e<s&&(e=s),i<o&&(i=o),0<e&&(e=0),0<i&&(i=0),this.$lImg.css({top:i,left:e})}},a.prototype.grabEnd=function(t){this.status.grabbing&&(this.status.grabbing=!1)},a.prototype.enable=function(){return this.status.enabled=!0,this.resetLargeImgCoordinate(),this.$el.addClass("is_enabled"),this.$lImg.fadeIn(this.opts.duration),this.$enable.fadeOut(this.opts.duration),this.$el.trigger(new n.Event("enable")),!1},a.prototype.disable=function(){return this.status.enabled=!1,this.grabEnd(),this.$el.removeClass("is_enabled"),this.$lImg.fadeOut(this.opts.duration),this.$enable.fadeIn(this.opts.duration),this.$el.trigger(new n.Event("disable")),!1},h.nZoomCarousel=function(t){_.bindAll(this,"setCurrentSlide","enable","disable"),this.opts=n.extend({duration:500},t),this.$el=n(this.opts.el),this.$enable=this.$el.find(".nZoom__enable"),this.currentSlide=0,this.$zoom=this.$el.find(".nZoom"),this.$zoom.nZoom().on("disable",this.disable),this.$enable.click(this.enable)},nZoomCarousel.prototype.setCurrentSlide=function(t){this.currentSlide=t},nZoomCarousel.prototype.enable=function(){return this.$zoom.eq(this.currentSlide).nZoom("enable"),this.$enable.fadeOut(this.opts.duration),!1},nZoomCarousel.prototype.disable=function(){this.$enable.fadeIn(this.opts.duration)}}(jQuery,this,this.document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjExMF9oZWFkZXIuanMiLCI0MTBfblpvb20uanMiLCI0MTBfQ2Fyb3VzZWwuanMiLCI5OTBfZm9vdGVyLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsInVuZGVmaW5lZCIsIm5ab29tIiwiZWwiLCJvcHRzIiwic2VsZiIsInRoaXMiLCJfIiwiYmluZEFsbCIsImV4dGVuZCIsImR1cmF0aW9uIiwiZGlzYWJsZUV2ZW50IiwiJHdpbmRvdyIsIiRlbCIsIiRpbWciLCJmaW5kIiwiJGltZ19zIiwiY2hpbGRyZW4iLCIkZW5hYmxlIiwic3RhdHVzIiwiZW5hYmxlZCIsImdyYWJiaW5nIiwiY29vcmRpbmF0ZSIsIngiLCJ5IiwidG9wIiwibGVmdCIsInJlc2l6ZSIsInJlc2l6ZVRpbWVyIiwib24iLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2V0TGFyZ2VJbWciLCJjbGljayIsImVuYWJsZSIsImV2ZW50IiwibW91c2Vkb3duLm56b29tIiwiZ3JhYlN0YXJ0IiwibW91c2Vtb3ZlLm56b29tIiwiZ3JhYk1vdmUiLCJtb3VzZXVwLm56b29tIiwiZ3JhYkVuZCIsImRpc2FibGUiLCJmbiIsImkiLCJyZXQiLCJvcHQiLCJhcmd1bWVudHMiLCJhcmdzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJsIiwibGVuZ3RoIiwiYXBwbHkiLCJjb25zb2xlIiwibG9nIiwiZWxfd2lkdGgiLCJ3aWR0aCIsImVsX3dpZHRoX2hhbGYiLCJNYXRoIiwicm91bmQiLCJlbF9oZWlnaHQiLCJoZWlnaHQiLCJlbF9oZWlnaHRfaGFsZiIsIiRsSW1nIiwiYXBwZW5kIiwiY2xvbmUiLCJyZW1vdmVBdHRyIiwiZmFkZU91dCIsInJlc2V0TGFyZ2VJbWdDb29yZGluYXRlIiwibEltZ193aWR0aCIsImxJbWdfaGVpZ2h0IiwiY3NzIiwiZSIsImNsaWVudFgiLCJjbGllbnRZIiwicGFyc2VJbnQiLCJtaW5feCIsIm1pbl95IiwiYWRkQ2xhc3MiLCJmYWRlSW4iLCJ0cmlnZ2VyIiwiRXZlbnQiLCJyZW1vdmVDbGFzcyIsIm5ab29tQ2Fyb3VzZWwiLCJjdXJyZW50U2xpZGUiLCIkem9vbSIsInNldEN1cnJlbnRTbGlkZSIsImVxIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0NBVUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxhQ2VBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsS0FDQUMsRUFBQUMsUUFBQUYsS0FBQSxTQUFBLGNBQUEsMEJBQUEsU0FBQSxVQUFBLFlBQUEsV0FBQSxXQUNBQSxLQUFBRixLQUFBTixFQUFBVyxPQUFBLENBQ0FDLFNBQUEsSUFDQUMsYUFBQSxjQUNBUCxHQUdBRSxLQUFBTSxRQUFBZCxFQUFBQyxHQUNBTyxLQUFBTyxJQUFBZixFQUFBSyxHQUNBRyxLQUFBUSxLQUFBUixLQUFBTyxJQUFBRSxLQUFBLGVBQ0FULEtBQUFVLE9BQUFWLEtBQUFRLEtBQUFHLFNBQUEsT0FDQVgsS0FBQVksUUFBQVosS0FBQU8sSUFBQUUsS0FBQSxrQkFHQVQsS0FBQWEsT0FBQSxDQUNBQyxTQUFBLEVBQ0FDLFVBQUEsR0FHQWYsS0FBQWdCLFdBQUEsQ0FDQUMsRUFBQSxFQUNBQyxFQUFBLEVBQ0FDLElBQUEsRUFDQUMsS0FBQSxHQUdBcEIsS0FBQXFCLFNBQ0EsSUFBQUMsRUFBQSxFQUNBdEIsS0FBQU0sUUFBQWlCLEdBQUEsU0FBQSxXQUNBLEVBQUFELEdBQ0FFLGFBQUFGLEdBRUFBLEVBQUFHLFdBQUExQixFQUFBc0IsT0FBQSxPQUdBckIsS0FBQTBCLGNBR0ExQixLQUFBWSxRQUFBZSxNQUFBM0IsS0FBQTRCLFFBRUEsSUFBQUMsRUFBQSxDQUNBQyxrQkFBQTlCLEtBQUErQixVQUNBQyxrQkFBQWhDLEtBQUFpQyxTQUNBQyxnQkFBQWxDLEtBQUFtQyxTQUdBTixFQUFBN0IsS0FBQUYsS0FBQU8sYUFBQSxVQUFBTCxLQUFBb0MsUUFDQXBDLEtBQUFPLElBQUFnQixHQUFBTSxHQTNFQXJDLEVB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ZW50IjpbIi8qIVxuICBcbiAganF1ZXJ5Lm5ab29tLmpzXG4gIFxuICBWZXJzaW9uOiAwLjEuMFxuICBBdXRob3I6IE51bmlmdWNoaXNha2EobnVuaWZ1Y2hpc2FrYUBnbWFpbC5jb20pXG4gIFdlYnNpdGU6IGh0dHA6Ly9udW5pZnVjaGlzYWthLmNvbS93L24tem9vbS9kZW1vXG4gIFJlcG9zaXRvcnk6IGh0dHBzOi8vZ2l0aHViLmNvbS9OdW5pZnVjaGlzYWthL25ab29tXG4gIFxuKi9cbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKXtcbid1c2Ugc3RyaWN0JztcbiIsIiQuZm4ublpvb20gPSBmdW5jdGlvbigpe1xuICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICBvcHQgPSBhcmd1bWVudHNbMF0sXG4gICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcbiAgICAgIGwgPSBzZWxmLmxlbmd0aCxcbiAgICAgIGksXG4gICAgICByZXQ7XG4gIFxuICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHR5cGVvZiBvcHQgPT0gJ29iamVjdCcgfHwgdHlwZW9mIG9wdCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgc2VsZltpXS5uWm9vbSA9IG5ldyBuWm9vbShzZWxmW2ldLCBvcHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXQgPSBzZWxmW2ldLm5ab29tW29wdF0uYXBwbHkoc2VsZltpXS5uWm9vbSwgYXJncyk7XG4gICAgICBpZiAodHlwZW9mIHJldCAhPSAndW5kZWZpbmVkJykgcmV0dXJuIHJldDtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBzZWxmO1xufVxuXG5cblxuLypcbiMjIG5ab29tXG4qL1xuXG5mdW5jdGlvbiBuWm9vbSggZWwsIG9wdHMgKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBfLmJpbmRBbGwodGhpcywgXCJyZXNpemVcIiwgXCJzZXRMYXJnZUltZ1wiLCBcInJlc2V0TGFyZ2VJbWdDb29yZGluYXRlXCIsIFwiZW5hYmxlXCIsIFwiZGlzYWJsZVwiLCBcImdyYWJTdGFydFwiLCBcImdyYWJNb3ZlXCIsIFwiZ3JhYkVuZFwiKTtcbiAgdGhpcy5vcHRzID0gJC5leHRlbmQoe1xuICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgZGlzYWJsZUV2ZW50OiBcIm1vdXNlbGVhdmVcIlxuICB9LCBvcHRzKTtcbiAgXG4gIC8vRE9NXG4gIHRoaXMuJHdpbmRvdyA9ICQod2luZG93KTtcbiAgdGhpcy4kZWwgPSAkKGVsKTtcbiAgdGhpcy4kaW1nID0gdGhpcy4kZWwuZmluZChcIi5uWm9vbV9faW1nXCIpO1xuICB0aGlzLiRpbWdfcyA9IHRoaXMuJGltZy5jaGlsZHJlbihcImltZ1wiKTtcbiAgdGhpcy4kZW5hYmxlID0gdGhpcy4kZWwuZmluZChcIi5uWm9vbV9fZW5hYmxlXCIpO1xuICBcbiAgLy9WYXJzXG4gIHRoaXMuc3RhdHVzID0ge1xuICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgIGdyYWJiaW5nOiBmYWxzZVxuICB9O1xuICBcbiAgdGhpcy5jb29yZGluYXRlID0ge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMFxuICB9O1xuICBcbiAgdGhpcy5yZXNpemUoKTtcbiAgdmFyIHJlc2l6ZVRpbWVyID0gMDtcbiAgdGhpcy4kd2luZG93Lm9uKFwicmVzaXplXCIsIGZ1bmN0aW9uKCl7XG4gICAgaWYocmVzaXplVGltZXIgPiAwKXtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgfVxuICAgIHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dChzZWxmLnJlc2l6ZSwgMjAwKTtcbiAgfSk7XG4gIFxuICB0aGlzLnNldExhcmdlSW1nKCk7XG4gIFxuICAvL0V2ZW50XG4gIHRoaXMuJGVuYWJsZS5jbGljayh0aGlzLmVuYWJsZSk7XG4gIFxuICB2YXIgZXZlbnQgPSB7XG4gICAgXCJtb3VzZWRvd24ubnpvb21cIjogdGhpcy5ncmFiU3RhcnRcbiAgICAsXCJtb3VzZW1vdmUubnpvb21cIjogdGhpcy5ncmFiTW92ZVxuICAgICxcIm1vdXNldXAubnpvb21cIjogdGhpcy5ncmFiRW5kXG4gICAgLy8sXCJtb3VzZWxlYXZlLm56b29tXCI6IHRoaXMuZGlzYWJsZVxuICB9O1xuICBldmVudFt0aGlzLm9wdHMuZGlzYWJsZUV2ZW50ICsgXCIubnpvb21cIl0gPSB0aGlzLmRpc2FibGU7XG4gIHRoaXMuJGVsLm9uKGV2ZW50KTtcbn1cblxuXG5uWm9vbS5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24oKXtcbiAgY29uc29sZS5sb2coXCJyZXNpemVcIik7XG4gIHRoaXMuZWxfd2lkdGggPSB0aGlzLiRlbC53aWR0aCgpO1xuICB0aGlzLmVsX3dpZHRoX2hhbGYgPSBNYXRoLnJvdW5kKHRoaXMuZWxfd2lkdGgvMik7XG4gIHRoaXMuZWxfaGVpZ2h0ID0gdGhpcy4kZWwuaGVpZ2h0KCk7XG4gIHRoaXMuZWxfaGVpZ2h0X2hhbGYgPSBNYXRoLnJvdW5kKHRoaXMuZWxfaGVpZ2h0LzIpO1xufVxuXG5cblxuLypcbiMjIHNldExhcmdlSW1nXG4qL1xuXG5uWm9vbS5wcm90b3R5cGUuc2V0TGFyZ2VJbWcgPSBmdW5jdGlvbigpe1xuICB0aGlzLiRsSW1nID0gJCgnPGRpdiBjbGFzcz1cIm5ab29tX19sSW1nXCIgLz4nKTtcbiAgdGhpcy4kbEltZ1xuICAgIC5hcHBlbmQoIHRoaXMuJGltZ19zLmNsb25lKCkucmVtb3ZlQXR0cihcIndpZHRoIGhlaWdodFwiKSApXG4gICAgLmZhZGVPdXQoMCk7XG4gIFxuICB0aGlzLiRpbWcuYXBwZW5kKHRoaXMuJGxJbWcpO1xuICBcbiAgdGhpcy5yZXNldExhcmdlSW1nQ29vcmRpbmF0ZSgpO1xufVxuXG5cbm5ab29tLnByb3RvdHlwZS5yZXNldExhcmdlSW1nQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubEltZ193aWR0aCA9IHRoaXMuJGxJbWcud2lkdGgoKTtcbiAgdGhpcy5sSW1nX2hlaWdodCA9IHRoaXMuJGxJbWcuaGVpZ2h0KCk7XG4gIHRoaXMuJGxJbWcuY3NzKHtcbiAgICB0b3A6IHRoaXMuZWxfaGVpZ2h0X2hhbGYgLSBNYXRoLnJvdW5kKHRoaXMubEltZ19oZWlnaHQvMiksXG4gICAgbGVmdDogdGhpcy5lbF93aWR0aF9oYWxmIC0gTWF0aC5yb3VuZCh0aGlzLmxJbWdfd2lkdGgvMilcbiAgfSk7XG59XG5cblxuXG4vKlxuIyMg44OJ44Op44OD44Kw44Kk44OZ44Oz44OIXG4qL1xuXG5uWm9vbS5wcm90b3R5cGUuZ3JhYlN0YXJ0ID0gZnVuY3Rpb24oZSl7XG4gIGlmKHRoaXMuc3RhdHVzLmVuYWJsZWQpe1xuICAgIHRoaXMuc3RhdHVzLmdyYWJiaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmNvb3JkaW5hdGUgPSB7XG4gICAgICB4OiBlLmNsaWVudFgsXG4gICAgICB5OiBlLmNsaWVudFksXG4gICAgICB0b3A6IHBhcnNlSW50KHRoaXMuJGxJbWcuY3NzKFwidG9wXCIpKSxcbiAgICAgIGxlZnQ6IHBhcnNlSW50KHRoaXMuJGxJbWcuY3NzKFwibGVmdFwiKSlcbiAgICB9XG4gIH1cbn1cblxuXG5uWm9vbS5wcm90b3R5cGUuZ3JhYk1vdmUgPSBmdW5jdGlvbihlKXtcbiAgaWYodGhpcy5zdGF0dXMuZ3JhYmJpbmcpe1xuICAgIHZhciB4ID0gdGhpcy5jb29yZGluYXRlLmxlZnQgKyAoLTEgKiAodGhpcy5jb29yZGluYXRlLnggLSBlLmNsaWVudFgpKTtcbiAgICB2YXIgeSA9IHRoaXMuY29vcmRpbmF0ZS50b3AgKyAoLTEgKiAodGhpcy5jb29yZGluYXRlLnkgLSBlLmNsaWVudFkpKTtcbiAgICBcbiAgICB2YXIgbWluX3ggPSAtMSAqICh0aGlzLmxJbWdfd2lkdGggLSB0aGlzLmVsX3dpZHRoKSxcbiAgICAgICAgbWluX3kgPSAtMSAqICh0aGlzLmxJbWdfaGVpZ2h0IC0gdGhpcy5lbF9oZWlnaHQpO1xuICAgIFxuICAgIGlmKCB4IDwgbWluX3ggKSB4ID0gbWluX3g7XG4gICAgaWYoIHkgPCBtaW5feSApIHkgPSBtaW5feTtcbiAgICBcbiAgICBpZiggeCA+IDAgKSB4ID0gMDtcbiAgICBpZiggeSA+IDAgKSB5ID0gMDtcbiAgICBcbiAgICB0aGlzLiRsSW1nLmNzcyh7XG4gICAgICB0b3A6IHksXG4gICAgICBsZWZ0OiB4XG4gICAgfSk7XG4gIH1cbn1cblxuXG5uWm9vbS5wcm90b3R5cGUuZ3JhYkVuZCA9IGZ1bmN0aW9uKGUpe1xuICBpZih0aGlzLnN0YXR1cy5ncmFiYmluZyl7XG4gICAgdGhpcy5zdGF0dXMuZ3JhYmJpbmcgPSBmYWxzZTtcbiAgfVxufVxuXG5cblxuLypcbiMjIGVuYWJsZSBhbmQgZGlzYWJsZVxuKi9cblxublpvb20ucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuc3RhdHVzLmVuYWJsZWQgPSB0cnVlO1xuICB0aGlzLnJlc2V0TGFyZ2VJbWdDb29yZGluYXRlKCk7XG4gIHRoaXMuJGVsLmFkZENsYXNzKFwiaXNfZW5hYmxlZFwiKTtcbiAgdGhpcy4kbEltZy5mYWRlSW4odGhpcy5vcHRzLmR1cmF0aW9uKTtcbiAgdGhpcy4kZW5hYmxlLmZhZGVPdXQodGhpcy5vcHRzLmR1cmF0aW9uKTtcbiAgXG4gIHRoaXMuJGVsLnRyaWdnZXIoIG5ldyAkLkV2ZW50KFwiZW5hYmxlXCIpICk7XG4gIFxuICByZXR1cm4gZmFsc2U7XG59XG5cblxublpvb20ucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLnN0YXR1cy5lbmFibGVkID0gZmFsc2U7XG4gIHRoaXMuZ3JhYkVuZCgpO1xuICB0aGlzLiRlbC5yZW1vdmVDbGFzcyhcImlzX2VuYWJsZWRcIik7XG4gIHRoaXMuJGxJbWcuZmFkZU91dCh0aGlzLm9wdHMuZHVyYXRpb24pO1xuICB0aGlzLiRlbmFibGUuZmFkZUluKHRoaXMub3B0cy5kdXJhdGlvbik7XG4gIFxuICB0aGlzLiRlbC50cmlnZ2VyKCBuZXcgJC5FdmVudChcImRpc2FibGVcIikgKTtcbiAgXG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qXG4jIyBuWm9vbUNhcm91c2VsXG4qL1xuXG53aW5kb3cublpvb21DYXJvdXNlbCA9IGZ1bmN0aW9uICggb3B0cyApe1xuICBfLmJpbmRBbGwodGhpcywgXCJzZXRDdXJyZW50U2xpZGVcIiwgXCJlbmFibGVcIiwgXCJkaXNhYmxlXCIpO1xuICB0aGlzLm9wdHMgPSAkLmV4dGVuZCh7XG4gICAgZHVyYXRpb246IDUwMFxuICB9LCBvcHRzKTtcbiAgXG4gIHRoaXMuJGVsID0gJCh0aGlzLm9wdHMuZWwpO1xuICB0aGlzLiRlbmFibGUgPSB0aGlzLiRlbC5maW5kKFwiLm5ab29tX19lbmFibGVcIik7XG4gIFxuICB0aGlzLmN1cnJlbnRTbGlkZSA9IDA7XG4gIFxuICB0aGlzLiR6b29tID0gdGhpcy4kZWwuZmluZChcIi5uWm9vbVwiKTtcbiAgdmFyIHpvb20gPSB0aGlzLiR6b29tLm5ab29tKCk7XG4gIHpvb20ub24oXCJkaXNhYmxlXCIsIHRoaXMuZGlzYWJsZSk7XG4gIFxuICB0aGlzLiRlbmFibGUuY2xpY2sodGhpcy5lbmFibGUpO1xufVxuXG5cbi8qXG4jIyBzZXRDdXJyZW50U2xpZGVcbiovXG5cbm5ab29tQ2Fyb3VzZWwucHJvdG90eXBlLnNldEN1cnJlbnRTbGlkZSA9IGZ1bmN0aW9uKGN1cnJlbnRTbGlkZSl7XG4gIHRoaXMuY3VycmVudFNsaWRlID0gY3VycmVudFNsaWRlO1xufVxuXG5cbi8qXG4jIyBlbmFibGVcbiovXG5cbm5ab29tQ2Fyb3VzZWwucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJHpvb20uZXEoIHRoaXMuY3VycmVudFNsaWRlICkublpvb20oXCJlbmFibGVcIik7XG4gIHRoaXMuJGVuYWJsZS5mYWRlT3V0KHRoaXMub3B0cy5kdXJhdGlvbik7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKlxuIyMgZGlzYWJsZVxuKi9cblxublpvb21DYXJvdXNlbC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJGVuYWJsZS5mYWRlSW4odGhpcy5vcHRzLmR1cmF0aW9uKTtcbn1cbiIsIn0pKGpRdWVyeSwgdGhpcywgdGhpcy5kb2N1bWVudCk7Il19
